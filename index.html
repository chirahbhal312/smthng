controller.addEventListener('select', () => {
  if (reticle.visible && model && !placedModel) {
    placedModel = clone(model);
    placedModel.position.setFromMatrixPosition(reticle.matrix);
    placedModel.scale.set(1, 1, 1);
    scene.add(placedModel);

    mixer = new THREE.AnimationMixer(placedModel);

    // Show animation buttons
    buttonsContainer.innerHTML = '';
    buttonsContainer.style.display = 'block';

    // âœ… Add Head button
    const headBtn = document.createElement('button');
    headBtn.textContent = 'Head';
    headBtn.onclick = () => {
      if (animations.length > 0) {
        mixer.stopAllAction();
        const headAction = mixer.clipAction(animations[0]);
        headAction.reset().play();
      }
    };
    buttonsContainer.appendChild(headBtn);

    // Add animation buttons
    animations.forEach(clip => {
      const btn = document.createElement('button');
      btn.textContent = clip.name;
      btn.onclick = () => {
        mixer.stopAllAction();
        const action = mixer.clipAction(clip);
        action.reset().play();
      };
      buttonsContainer.appendChild(btn);
    });

    // Show part names
    partContainer.innerHTML = '<strong>Model Parts:</strong><br>';
    partContainer.style.display = 'block';
    placedModel.traverse(child => {
      partContainer.innerHTML += `${child.name || '(Unnamed)'} - <i>${child.type}</i><br>`;
    });
  }
});
